apiVersion: v1
data:
  config: |
    address-pools:
      - name: home-office
        protocol: layer2
        addresses:
          - 192.168.1.229-192.168.1.251
kind: ConfigMap
metadata:
  name: metallb-config
  namespace: kube-system
---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  annotations:
    fluxcd.io/automated: 'false'
    fluxcd.io/ignore: 'false'
  name: metallb
  namespace: kube-system
spec:
  chart:
    name: metallb
    repository: https://kubernetes-charts.storage.googleapis.com/
    version: 0.12.0
  releaseName: metallb
  values:
    existingConfig: metallb-config
    prometheus:
      prometheusRule:
        enabled: true
      serviceMonitor:
        enabled: true
